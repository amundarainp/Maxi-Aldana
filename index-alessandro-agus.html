<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Alessandro & Agus ‚Äî Aniversario</title>
    <meta
      name="description"
      content="Un regalo de aniversario: historia completa de Alessandro y Agus."
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Plus+Jakarta+Sans:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg: #0d0b12;
        --bg-2: #14111b;
        --rose: #ff6b81;
        --rose-2: #ff9aa8;
        --gold: #f5c56b;
        --text: #f5f4f8;
        --muted: #b8b4c3;
        --glass: rgba(255, 255, 255, 0.08);
        --glass-2: rgba(255, 255, 255, 0.12);
        --shadow: 0 20px 60px rgba(0, 0, 0, 0.45);
      }

      * {
        box-sizing: border-box;
      }
      html,
      body {
        margin: 0;
        padding: 0;
      }
      body {
        font-family:
          "Plus Jakarta Sans",
          system-ui,
          -apple-system,
          sans-serif;
        background:
          radial-gradient(
            1200px 600px at 10% -10%,
            #2a1f36 0%,
            transparent 60%
          ),
          radial-gradient(
            1200px 600px at 100% 10%,
            #2b1b2e 0%,
            transparent 60%
          ),
          var(--bg);
        color: var(--text);
        line-height: 1.6;
        overflow-x: hidden;
      }

      .glow {
        position: fixed;
        inset: -30vh -30vw;
        background:
          radial-gradient(
            closest-side,
            rgba(255, 107, 129, 0.16),
            transparent 70%
          ),
          radial-gradient(
            closest-side,
            rgba(245, 197, 107, 0.12),
            transparent 70%
          );
        filter: blur(40px);
        z-index: -1;
        pointer-events: none;
      }

      header {
        padding: 72px 6vw 48px;
        position: relative;
      }

      .badge {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 8px 14px;
        border-radius: 999px;
        background: var(--glass);
        border: 1px solid rgba(255, 255, 255, 0.08);
        color: var(--rose-2);
        font-weight: 600;
        font-size: 14px;
        letter-spacing: 0.08em;
        text-transform: uppercase;
      }

      .hero {
        max-width: 1100px;
        margin: 28px auto 0;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 32px;
        align-items: center;
      }

      .hero h1 {
        font-family: "Playfair Display", serif;
        font-size: clamp(36px, 6vw, 68px);
        line-height: 1.05;
        margin: 18px 0 10px;
      }

      .hero p {
        color: var(--muted);
        font-size: clamp(16px, 2.3vw, 20px);
        margin: 0 0 20px;
      }

      .hero .cta {
        display: inline-flex;
        gap: 14px;
        flex-wrap: wrap;
      }

      .gift-callout {
        margin-top: 24px;
        padding: 32px;
        border-radius: 26px;
        background: linear-gradient(
          135deg,
          rgba(255, 154, 168, 0.16),
          rgba(245, 197, 107, 0.12)
        );
        border: 1px solid rgba(255, 255, 255, 0.16);
        display: grid;
        gap: 14px;
        justify-items: center;
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      .gift-callout::after {
        content: "";
        position: absolute;
        width: 220px;
        height: 220px;
        border-radius: 50%;
        background: radial-gradient(
          circle,
          rgba(255, 154, 168, 0.45),
          transparent 70%
        );
        top: -80px;
        right: -60px;
        filter: blur(2px);
      }

      .gift-btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 120px;
        height: 120px;
        border-radius: 28px;
        font-size: 52px;
        background: rgba(255, 255, 255, 0.12);
        border: 1px solid rgba(255, 255, 255, 0.28);
        cursor: pointer;
        position: relative;
        animation: giftFloat 3.6s ease-in-out infinite;
        box-shadow: 0 18px 36px rgba(255, 107, 129, 0.35);
      }

      .gift-btn::before,
      .gift-btn::after {
        content: "";
        position: absolute;
        inset: -10px;
        border-radius: 30px;
        border: 2px solid rgba(255, 154, 168, 0.5);
        animation: giftPulse 2.4s ease-out infinite;
        opacity: 0;
      }

      .gift-btn::after {
        animation-delay: 1.2s;
        border-color: rgba(245, 197, 107, 0.45);
      }

      .gift-btn:hover {
        transform: translateY(-2px) scale(1.02);
      }

      .btn {
        border: none;
        padding: 14px 22px;
        border-radius: 14px;
        font-weight: 600;
        cursor: pointer;
        transition:
          transform 0.2s ease,
          box-shadow 0.2s ease;
      }

      .btn-primary {
        background: linear-gradient(135deg, var(--rose), var(--rose-2));
        color: #121018;
        box-shadow: 0 12px 28px rgba(255, 107, 129, 0.35);
      }

      .btn-ghost {
        background: transparent;
        color: var(--text);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .btn:hover {
        transform: translateY(-2px);
      }

      .hero-card {
        background: linear-gradient(
          145deg,
          rgba(255, 255, 255, 0.08),
          rgba(255, 255, 255, 0.02)
        );
        border: 1px solid rgba(255, 255, 255, 0.12);
        border-radius: 28px;
        padding: 26px;
        box-shadow: var(--shadow);
        position: relative;
        overflow: hidden;
      }

      .hero-card::after {
        content: "";
        position: absolute;
        width: 180px;
        height: 180px;
        border-radius: 50%;
        background: radial-gradient(
          circle,
          rgba(255, 154, 168, 0.35),
          transparent 70%
        );
        right: -60px;
        top: -60px;
        filter: blur(2px);
      }

      .mini-story {
        display: grid;
        gap: 14px;
      }

      .mini-story h3 {
        font-family: "Playfair Display", serif;
        margin: 0;
        font-size: 24px;
      }

      .chips {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }

      .chip {
        padding: 6px 12px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.12);
        background: rgba(255, 255, 255, 0.06);
        font-size: 13px;
        color: var(--muted);
      }

      main {
        padding: 0 6vw 80px;
      }

      .section {
        max-width: 1100px;
        margin: 0 auto;
        padding: 40px 0;
      }

      .section h2 {
        font-family: "Playfair Display", serif;
        font-size: clamp(26px, 4vw, 42px);
        margin: 0 0 12px;
      }

      .section p {
        color: var(--muted);
      }

      .timeline {
        display: grid;
        gap: 16px;
        margin-top: 24px;
      }

      .moment {
        display: grid;
        grid-template-columns: 46px 1fr;
        gap: 16px;
        align-items: start;
        padding: 18px 20px;
        border-radius: 18px;
        background: var(--glass);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .moment span {
        width: 46px;
        height: 46px;
        border-radius: 14px;
        background: rgba(255, 107, 129, 0.2);
        display: grid;
        place-items: center;
        font-size: 20px;
      }

      .moment h4 {
        margin: 0 0 6px;
        font-size: 18px;
      }
      .moment p {
        margin: 0;
        font-size: 15px;
      }

      .premium-grid {
        display: grid;
        gap: 18px;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        margin-top: 24px;
      }

      .card {
        border-radius: 18px;
        background: var(--glass);
        border: 1px solid rgba(255, 255, 255, 0.1);
        padding: 20px;
        min-height: 160px;
        position: relative;
      }

      .card h4 {
        margin: 0 0 8px;
      }
      .card p {
        margin: 0;
        font-size: 14px;
      }

      .love-letter {
        background: linear-gradient(
          135deg,
          rgba(255, 154, 168, 0.12),
          rgba(245, 197, 107, 0.1)
        );
        border-radius: 22px;
        padding: 28px;
        border: 1px solid rgba(255, 255, 255, 0.16);
        margin-top: 26px;
        position: relative;
      }

      .love-letter p {
        font-family: "Playfair Display", serif;
        font-size: clamp(18px, 2.5vw, 22px);
        color: #f6edf2;
      }

      .gallery {
        display: grid;
        gap: 14px;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        margin-top: 18px;
      }

      .photo {
        height: 170px;
        border-radius: 18px;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.08),
          rgba(255, 255, 255, 0.03)
        );
        border: 1px dashed rgba(255, 255, 255, 0.25);
        display: grid;
        place-items: center;
        color: var(--muted);
        font-size: 14px;
        text-align: center;
        padding: 12px;
      }

      .storyline {
        display: grid;
        gap: 14px;
      }

      .storyline details {
        background: var(--glass);
        border-radius: 18px;
        padding: 14px 18px;
        border: 1px solid rgba(255, 255, 255, 0.12);
      }

      summary {
        cursor: pointer;
        font-weight: 600;
        list-style: none;
      }

      summary::-webkit-details-marker {
        display: none;
      }

      .footer {
        padding: 32px 6vw 60px;
        text-align: center;
        color: var(--muted);
      }

      .footer a {
        color: var(--rose-2);
        text-decoration: none;
      }

      .footer a:hover {
        text-decoration: underline;
      }

      .floating-hearts {
        position: absolute;
        inset: 0;
        pointer-events: none;
        overflow: hidden;
      }

      .modal {
        position: fixed;
        inset: 0;
        background: rgba(7, 6, 12, 0.7);
        display: none;
        place-items: center;
        padding: 24px;
        z-index: 20;
        backdrop-filter: blur(6px);
      }

      .modal.open {
        display: grid;
      }

      .modal-card {
        width: min(960px, 100%);
        background: var(--bg-2);
        border-radius: 24px;
        border: 1px solid rgba(255, 255, 255, 0.12);
        box-shadow: var(--shadow);
        padding: 24px;
        display: grid;
        gap: 18px;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        position: relative;
      }

      .modal-header {
        grid-column: 1 / -1;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .close-btn {
        background: transparent;
        border: 1px solid rgba(255, 255, 255, 0.2);
        color: var(--text);
        padding: 6px 12px;
        border-radius: 10px;
        cursor: pointer;
      }

      .card-preview {
        background: linear-gradient(
          135deg,
          rgba(255, 154, 168, 0.18),
          rgba(245, 197, 107, 0.16)
        );
        border-radius: 18px;
        padding: 16px;
        border: 1px solid rgba(255, 255, 255, 0.12);
        display: grid;
        gap: 10px;
        align-content: start;
        min-height: 320px;
      }

      .card-preview canvas {
        width: 100%;
        border-radius: 14px;
        background: rgba(255, 255, 255, 0.08);
        border: 1px solid rgba(255, 255, 255, 0.16);
      }

      .form-field {
        display: grid;
        gap: 6px;
      }

      .form-field label {
        font-size: 13px;
        color: var(--muted);
      }

      .form-field input,
      .form-field textarea {
        background: rgba(255, 255, 255, 0.06);
        border: 1px solid rgba(255, 255, 255, 0.14);
        color: var(--text);
        border-radius: 12px;
        padding: 10px 12px;
        font-family: inherit;
        font-size: 14px;
      }

      .form-actions {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
        margin-top: 8px;
      }

      .heart {
        position: absolute;
        width: 14px;
        height: 14px;
        background: var(--rose);
        transform: rotate(45deg);
        opacity: 0.7;
        animation: floatUp linear infinite;
      }

      .heart::before,
      .heart::after {
        content: "";
        position: absolute;
        width: 14px;
        height: 14px;
        background: var(--rose);
        border-radius: 50%;
      }

      .heart::before {
        left: -7px;
      }
      .heart::after {
        top: -7px;
      }

      @keyframes floatUp {
        from {
          transform: translateY(40px) rotate(45deg);
          opacity: 0;
        }
        25% {
          opacity: 0.6;
        }
        to {
          transform: translateY(-120vh) rotate(45deg);
          opacity: 0;
        }
      }

      @keyframes giftPulse {
        0% {
          transform: scale(0.9);
          opacity: 0.6;
        }
        70% {
          transform: scale(1.15);
          opacity: 0;
        }
        100% {
          transform: scale(1.2);
          opacity: 0;
        }
      }

      @keyframes giftFloat {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }

      @media (max-width: 640px) {
        header {
          padding: 60px 6vw 36px;
        }
        .hero-card {
          order: -1;
        }
      }
    </style>
  </head>
  <body>
    <div class="glow"></div>
    <div class="floating-hearts" aria-hidden="true" id="hearts"></div>

    <header>
      <div class="badge">Aniversario 2026 ¬∑ Alessandro ‚Üí Agus</div>
      <section class="hero">
        <div>
          <h1>Un aniversario contado en voz baja, dedicado a Agus.</h1>
          <p>
            Un regalo de Alessandro para celebrar lo que ya vivimos y lo que
            seguimos eligiendo. Cada secci√≥n guarda instantes sutiles, gestos
            cotidianos y la calma de sabernos en casa.
          </p>
          <div class="cta">
            <button
              class="btn btn-primary"
              onclick="
                document
                  .getElementById('historia')
                  .scrollIntoView({ behavior: 'smooth' })
              "
            >
              Revivir la historia
            </button>
            <button
              class="btn btn-ghost"
              onclick="
                document
                  .getElementById('planes')
                  .scrollIntoView({ behavior: 'smooth' })
              "
            >
              Ver los rituales
            </button>
          </div>
        </div>
        <div class="hero-card">
          <div class="mini-story">
            <h3>Para Agus</h3>
            <p>
              Este sitio celebra lo que somos y lo que cuidamos cada d√≠a. Gracias
              por la serenidad que tra√©s a mis d√≠as.
            </p>
            <div class="chips">
              <span class="chip">Sobremesas lentas</span>
              <span class="chip">Paseos de la mano</span>
              <span class="chip">Notas escondidas</span>
              <span class="chip">Hogar compartido</span>
            </div>
          </div>
        </div>
      </section>
    </header>

    <main>
      <section class="section" id="historia">
        <h2>Historia completa, con detalles sutiles</h2>
        <p>
          Un recorrido por nuestra historia, contado en cap√≠tulos que guardan lo
          m√°s lindo que construimos en lo cotidiano.
        </p>

        <div class="timeline">
          <div class="moment">
            <span>‚ú®</span>
            <div>
              <h4>El d√≠a simple que se volvi√≥ especial</h4>
              <p>
                Un saludo breve, una charla sin apuro y esa sensaci√≥n tranquila de
                estar donde ten√≠a que estar.
              </p>
            </div>
          </div>
          <div class="moment">
            <span>üí´</span>
            <div>
              <h4>Los rituales peque√±os</h4>
              <p>
                Mensajes que llegan justo, canciones que nos nombran, y una risa
                que se volvi√≥ refugio sin hacer ruido.
              </p>
            </div>
          </div>
          <div class="moment">
            <span>üåô</span>
            <div>
              <h4>El abrazo que calma</h4>
              <p>
                Ese abrazo que no pide palabras y deja claro que elegimos cuidarnos
                incluso cuando el mundo corre r√°pido.
              </p>
            </div>
          </div>
          <div class="moment">
            <span>üåø</span>
            <div>
              <h4>El presente que elegimos</h4>
              <p>
                Hoy somos equipo: sabemos escucharnos, sostenernos y celebrar lo
                simple. Lo nuestro se siente hogar.
              </p>
            </div>
          </div>
        </div>

        <div class="love-letter">
          <p>
            "Agus, gracias por tu ternura, por tu claridad y por esas formas
            m√≠nimas en las que me cuid√°s sin decirlo. Este aniversario me recuerda
            que lo nuestro es suave y fuerte a la vez. Te amo en lo simple y en lo
            eterno."
          </p>
        </div>
      </section>

      <section class="section" id="planes">
        <h2>Plan aniversario: lo que cuidamos</h2>
        <p>
          Detalles pensados para abrazar lo que somos y lo que queremos seguir
          construyendo.
        </p>

        <div class="premium-grid">
          <div class="card">
            <h4>Escapada de aniversario</h4>
            <p>
              Un viaje breve, sin reloj, para caminar despacio y guardar un nuevo
              recuerdo.
            </p>
          </div>
          <div class="card">
            <h4>Ritual de gratitud</h4>
            <p>
              Un mensaje cada semana con tres cosas que agradecemos del otro.
            </p>
          </div>
          <div class="card">
            <h4>Proyecto compartido</h4>
            <p>
              Algo nuestro hecho de a dos: con paciencia, con orgullo y con
              cari√±o.
            </p>
          </div>
          <div class="card">
            <h4>Calma cotidiana</h4>
            <p>
              Cuidarnos con h√°bitos simples: caminatas, charlas honestas y
              recordarnos que la calma tambi√©n es amor.
            </p>
          </div>
        </div>
      </section>

      <section class="section">
        <h2>Galer√≠a de recuerdos</h2>
        <p>
          Un espacio para sumar fotos favoritas o momentos que queremos recordar
          siempre.
        </p>
        <div class="gallery">
          <div class="photo">Foto 1 ¬∑ una tarde tranquila</div>
          <div class="photo">Foto 2 ¬∑ una risa compartida</div>
          <div class="photo">Foto 3 ¬∑ paseo sin apuro</div>
          <div class="photo">Foto 4 ¬∑ nuestro aniversario</div>
        </div>
      </section>

      <section class="section">
        <h2>Cap√≠tulos secretos</h2>
        <p>
          Notas √≠ntimas para leer juntos. Se abren con un click, como un
          susurro.
        </p>
        <div class="storyline">
          <details>
            <summary>Cap√≠tulo I ‚Äî Lo que me ense√±√°s sin darte cuenta</summary>
            <p>
              Me ense√±√°s a ir m√°s despacio, a cuidar detalles y a confiar en lo
              que sentimos. Con vos, todo se vuelve m√°s simple.
            </p>
          </details>
          <details>
            <summary>Cap√≠tulo II ‚Äî Lo que m√°s admiro de vos</summary>
            <p>
              Admiro tu sensibilidad y tu firmeza suave. Tu forma de escuchar y
              de sostener hace que todo se vea m√°s claro.
            </p>
          </details>
          <details>
            <summary>Cap√≠tulo III ‚Äî Lo que prometo cuidar</summary>
            <p>
              Prometo elegirnos en lo peque√±o y en lo grande. Prometo ser tu
              abrigo y celebrar cada paso que das.
            </p>
          </details>
        </div>
      </section>

      <section class="section">
        <div class="gift-callout">
          <h2>Tu regalo de aniversario te espera</h2>
          <p>
            Un detalle descargable con foto, fecha y dedicatoria. Toc√° el regalo
            para abrir la tarjeta.
          </p>
          <button
            class="gift-btn"
            id="openGift"
            aria-label="Abrir tarjeta de regalo"
          >
            üéÅ
          </button>
        </div>
      </section>
    </main>

    <div class="modal" id="giftModal" aria-hidden="true">
      <div
        class="modal-card"
        role="dialog"
        aria-modal="true"
        aria-labelledby="giftTitle"
      >
        <div class="modal-header">
          <div>
            <div class="badge" style="font-size: 12px">Tarjeta descargable</div>
            <h3
              id="giftTitle"
              style="
                margin: 8px 0 0;
                font-family: &quot;Playfair Display&quot;, serif;
              "
            >
              Para Agus, en nuestro aniversario
            </h3>
          </div>
          <button class="close-btn" id="closeGift">Cerrar</button>
        </div>

        <div class="card-preview">
          <canvas
            id="giftCanvas"
            width="900"
            height="540"
            aria-label="Vista previa de la tarjeta"
          ></canvas>
          <small style="color: var(--muted)"
            >Vista previa autom√°tica. Pod√©s descargar la tarjeta con tu
            foto.</small
          >
        </div>

        <div class="card-preview" style="background: rgba(255, 255, 255, 0.04)">
          <div class="form-field">
            <label for="giftPhoto">Foto (sub√≠ una imagen)</label>
            <input type="file" id="giftPhoto" accept="image/*" />
          </div>
          <div class="form-field">
            <label for="giftDate">Fecha</label>
            <input type="date" id="giftDate" />
          </div>
          <div class="form-field">
            <label for="giftDedication">Dedicatoria</label>
            <textarea id="giftDedication" rows="5">
Agus, gracias por este a√±o compartido. Feliz aniversario. ‚Äî Alessandro</textarea
            >
          </div>
          <div class="form-actions">
            <button class="btn btn-primary" id="downloadGift">
              Descargar tarjeta
            </button>
            <button class="btn btn-ghost" id="refreshGift">
              Actualizar vista previa
            </button>
          </div>
        </div>
      </div>
    </div>

    <footer class="footer">
      Hecho con amor por Alessandro, para Agus ¬∑ Aniversario 2026
      <br />
      <small
        >Regal√°:
        <a href="https://amorenpaginas.com.ar" target="_blank" rel="noopener"
          >Amor en P√°ginas</a
        ></small
      >
    </footer>

    <script>
      const heartsContainer = document.getElementById("hearts");
      const totalHearts = 18;

      for (let i = 0; i < totalHearts; i++) {
        const heart = document.createElement("div");
        heart.className = "heart";
        const size = 10 + Math.random() * 10;
        heart.style.width = `${size}px`;
        heart.style.height = `${size}px`;
        heart.style.left = `${Math.random() * 100}%`;
        heart.style.animationDuration = `${10 + Math.random() * 10}s`;
        heart.style.animationDelay = `${Math.random() * 6}s`;
        heart.style.opacity = `${0.4 + Math.random() * 0.4}`;
        heartsContainer.appendChild(heart);
      }

      const giftModal = document.getElementById("giftModal");
      const openGift = document.getElementById("openGift");
      const closeGift = document.getElementById("closeGift");
      const giftPhoto = document.getElementById("giftPhoto");
      const giftDate = document.getElementById("giftDate");
      const giftDedication = document.getElementById("giftDedication");
      const downloadGift = document.getElementById("downloadGift");
      const refreshGift = document.getElementById("refreshGift");
      const giftCanvas = document.getElementById("giftCanvas");
      const ctx = giftCanvas.getContext("2d");
      let photoImage = null;

      const formatDate = (value) => {
        if (!value) return "30/01/2026";
        const [y, m, d] = value.split("-");
        return `${d}/${m}/${y}`;
      };

      const drawCard = () => {
        const width = giftCanvas.width;
        const height = giftCanvas.height;

        ctx.clearRect(0, 0, width, height);

        const gradient = ctx.createLinearGradient(0, 0, width, height);
        gradient.addColorStop(0, "#3b2330");
        gradient.addColorStop(1, "#1a1324");
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, width, height);

        ctx.fillStyle = "rgba(255, 255, 255, 0.06)";
        ctx.fillRect(40, 40, width - 80, height - 80);

        if (photoImage) {
          const imgWidth = 340;
          const imgHeight = 420;
          const imgX = 70;
          const imgY = 60;
          ctx.save();
          ctx.beginPath();
          ctx.roundRect(imgX, imgY, imgWidth, imgHeight, 22);
          ctx.clip();
          const ratio = Math.max(
            imgWidth / photoImage.width,
            imgHeight / photoImage.height,
          );
          const drawWidth = photoImage.width * ratio;
          const drawHeight = photoImage.height * ratio;
          const offsetX = imgX + (imgWidth - drawWidth) / 2;
          const offsetY = imgY + (imgHeight - drawHeight) / 2;
          ctx.drawImage(photoImage, offsetX, offsetY, drawWidth, drawHeight);
          ctx.restore();
        } else {
          ctx.fillStyle = "rgba(255,255,255,.08)";
          ctx.fillRect(70, 60, 340, 420);
          ctx.fillStyle = "#cbbad2";
          ctx.font = '20px "Plus Jakarta Sans"';
          ctx.fillText("Sub√≠ una foto", 150, 280);
        }

        ctx.fillStyle = "#f5e6ef";
        ctx.font = '38px "Playfair Display"';
        ctx.fillText("Para Agus", 460, 130);

        ctx.fillStyle = "#f4c88b";
        ctx.font = '20px "Plus Jakarta Sans"';
        ctx.fillText(`Fecha: ${formatDate(giftDate.value)}`, 460, 170);

        ctx.fillStyle = "#f5f4f8";
        ctx.font = '22px "Plus Jakarta Sans"';
        const dedication = giftDedication.value.trim() || "Siempre juntos.";
        const lines = wrapText(ctx, dedication, 380);
        let textY = 220;
        lines.forEach((line) => {
          ctx.fillText(line, 460, textY);
          textY += 30;
        });

        ctx.fillStyle = "rgba(255, 107, 129, 0.6)";
        ctx.font = '18px "Plus Jakarta Sans"';
        ctx.fillText("Con amor, Alessandro", 460, 450);
      };

      const wrapText = (context, text, maxWidth) => {
        const words = text.split(" ");
        const lines = [];
        let line = "";
        words.forEach((word) => {
          const testLine = line + word + " ";
          const metrics = context.measureText(testLine);
          if (metrics.width > maxWidth && line) {
            lines.push(line.trim());
            line = word + " ";
          } else {
            line = testLine;
          }
        });
        if (line) lines.push(line.trim());
        return lines;
      };

      openGift.addEventListener("click", () => {
        giftModal.classList.add("open");
        giftModal.setAttribute("aria-hidden", "false");
        drawCard();
      });

      closeGift.addEventListener("click", () => {
        giftModal.classList.remove("open");
        giftModal.setAttribute("aria-hidden", "true");
      });

      giftModal.addEventListener("click", (event) => {
        if (event.target === giftModal) {
          giftModal.classList.remove("open");
          giftModal.setAttribute("aria-hidden", "true");
        }
      });

      giftPhoto.addEventListener("change", (event) => {
        const file = event.target.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = () => {
          const img = new Image();
          img.onload = () => {
            photoImage = img;
            drawCard();
          };
          img.src = reader.result;
        };
        reader.readAsDataURL(file);
      });

      [giftDate, giftDedication].forEach((input) => {
        input.addEventListener("input", drawCard);
      });

      refreshGift.addEventListener("click", drawCard);

      downloadGift.addEventListener("click", () => {
        drawCard();
        const link = document.createElement("a");
        link.download = "tarjeta-alessandro-agus.png";
        link.href = giftCanvas.toDataURL("image/png");
        link.click();
      });

      drawCard();
    </script>
  </body>
</html>
